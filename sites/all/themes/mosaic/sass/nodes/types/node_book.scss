
// Some scss customizations for the book node type.
//  adjusts a few layout parameters
@import 'global/arrows';
@import 'global/colors';
@import 'global/fonts';
@import 'global/grid_mix';
@import 'global/headers';
@import 'global/icons';
@import 'global/site_vars';
@import 'global/gradients';

@import 'compass/utilities/general/clearfix';
@import 'compass/css3/box-sizing';
@import 'compass/css3/box-shadow';
@import 'compass/css3/border-radius';

// Re-adjust the grid ;-)
// Actual book node styles
.layout-landing-responsive .secondary-content { @include col(8); }
.layout-landing-responsive .main-content { 
  .limiter.prepend-1 {
    margin-left: $default_vert_unit / 2;
  }
  
  @include col(16, true);
  float: right; 
}

.page-comment-reply .book-node-pane-title,
.node-type-book .book-node-pane-title,
.node-type-book .pane-node-title {
  h1 { // main page title
    margin: -.15em 0 .65em 0;
    line-height: 16px;
  }

  .icon {
    display: block;
    float: left;
    margin-right: .4em;
    margin-top: -3px;
    @include icons-sprite('coral-book');
  }
}
.node-type-book .book-node-pane-title {
  display: none;
}

.node-type-book {
  
  // Add icons and so on
  .links {
    .icon {
      display: block;
      float: left;
      margin: 2px 2px 0 0;
    }
    .discussion a {
      .icon {
        @include icons-sprite('coral-comment');
      }
    
      &.active .icon,
      &:hover .icon {
        @include icons-sprite('coral-comment-on');
      }
    }
    
    .book_printer a {
      .icon {
        @include icons-sprite('print-off');
      }
    
      &.active .icon,
      &:hover .icon {
        @include icons-sprite('print');
      }
    }
    
    .book_add_child a {
      .icon {
        @include icons-sprite('coral-new-page-off');
      }
    
      &.active .icon,
      &:hover .icon {
        @include icons-sprite('coral-new-page');
      }
    }
  }
}


// Full node display
.page-node.node-type-book .pane-node .links {
  //padding: ($default_vert_unit / 2) 0;
  
  li.first {
    border-right: none;
  }
}


// Talk section styles - see Discussion (talk) tab
.page-comment-reply .layout-node-1 .main-content,
.node-type-book.node-talk .layout-node-1 .main-content { 
  position: relative;
  //overflow: hidden;
  
  h1.page-title {
    margin-bottom: 0;
  }

  .book-node-pane-title {
    @include h0;
    display: block;
    background: lighten($mdgray, 7%);
    margin: -1em -1em $default_vert_unit;
    padding: $default_vert_unit / 2;
    .icon {
      margin-top: 0;
    }
    a {
      color: $white;
    }
    //@include col(10, false, right);
  }
  
  //pane-entity-view pane-node
  //.pane-node-body {
  .pane-entity-view.pane-node {
    background: lighten($ltgray, 10%);
    margin-left: 1em;
    margin-bottom: $default_vert_unit;
    
    h2.node-title {
      display: none;
    }
    
    & > .pane-content {
      border: 1px solid $mdgray;
      padding: 1em;
      //.node-book { margin-top: $default_vert_unit; }
    }
    ul.links.inline {
      margin: 0;

      &:after {
        display: none;
      }
      
      li.first {
        border-right: none;
      }
    }
    
    @include col(10, false, right);   
  }
  
  @include col(24, true, none); 
}


@media screen and (max-width: $tabletw) {
  .page-comment.page-comment-reply,
  .page-node.node-type-book {
    .layout-landing-responsive .secondary-content { 
      @include col($columns, 'true');
    
      .panel-pane {
        @include col($columns, 'true');
        margin-right: 0;
      }
      
      .pane-documentation-related-node {
        margin-top: 0;
      }
      
      .pane-related-qa-small-list {
        @include col($columns, 'true');
        margin-right: 0;
      }
    }
    .layout-landing-responsive .main-content { 
      @include col($columns, 'true');
      
      & > .prepend-1 {
        margin: 0;
      }
    }
    
    #main-content .layout-node-1 {
      .pane-node {
        float: right;
        width: 100%;
        margin-right: -100%;
        
        // Prevent the node's height from 
        //  affecting the comment container for now
        display: none;
      }
      h1.page-title {
        &:after {
          display: block;
        }
      }
    }
  }
}